(this.webpackJsonpspotifyclone=this.webpackJsonpspotifyclone||[]).push([[0],{11:function(e,t,a){e.exports={home:"Home_home__2M4by",greetings:"Home_greetings__233WY"}},12:function(e,t,a){e.exports={Nav:"Nav_Nav__aJYM9",NavArrow:"Nav_NavArrow__2BsAa",search:"Nav_search__3_v3a",NavSearch:"Nav_NavSearch__3_hT_",result:"Nav_result__1CdqP"}},127:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(15),i=a.n(s),r=(a(66),a(48)),o=a.n(r),u=a(1);var l=function(){return Object(u.jsxs)("div",{class:o.a.login,children:[Object(u.jsx)("img",{src:"https://getheavy.com/wp-content/uploads/2019/12/spotify2019-830x350.jpg",alt:""}),Object(u.jsx)("a",{href:"https://accounts.spotify.com/authorize?client_id=cea15f2d1f164548b6042a367be00301&response_type=code&redirect_uri=https://sheifunmi-spotify-clone-ewebajo-oluwaseyi.vercel.app&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state",children:"Login"})]})},d=a(29),j=a.n(d),b=a(49),p=a(5),f=a(18),h=a.n(f),_=a(10),O=a(11),g=a.n(O),m=a(12),x=a.n(m),v=a(17),S=a.n(v),y=a(19),T=a.n(y);var k=function(e){var t=e.track,a=e.chooseTrack;return Object(u.jsxs)("div",{className:T.a.trackSearch,onClick:function(){a(t)},children:[Object(u.jsx)("img",{src:t.albumUrl.url,style:{height:"64px",width:"64px"},alt:""}),Object(u.jsxs)("div",{style:{marginLeft:"10px"},children:[Object(u.jsx)("div",{className:T.a.title,children:t.title}),Object(u.jsx)("div",{className:T.a.artist,children:t.artist})]})]})},N=a(3),w=a(9),I=Object(w.b)({name:"audio",initialState:{audioData:{playing:!0}},reducers:{currentMusic:function(e,t){e.audioData=Object(_.a)(Object(_.a)({},t.payload),{},{playing:!e.audioData.playing})},setPlaying:function(e){e.audioData.playing=!e.audioData.playing},clearMusic:function(e){e.audioData={playing:!0,url:"",currentSongPic:"",currentSongTitle:"",currentSongArtist:""}}}}),D=I.actions,A=I,L=new S.a({clientId:"cea15f2d1f164548b6042a367be00301"});var R=function(e){var t=e.accessToken,a=Object(c.useState)(""),n=Object(p.a)(a,2),s=n[0],i=n[1],r=Object(c.useState)([]),o=Object(p.a)(r,2),l=o[0],d=o[1],j=Object(c.useState)(),b=Object(p.a)(j,2),f=(b[0],b[1]),h=Object(N.b)();function _(e){h(D.currentMusic(e)),f(e),i("")}return Object(c.useEffect)((function(){if(!s)return d([]);if(t){var e=!1;return L.setAccessToken(t),L.searchTracks(s).then((function(t){e||d(t.body.tracks.items.map((function(e){var t=e.album.images.reduce((function(e,t){return t.height<e.height?t:e}),e.album.images[0]);return{artist:e.artists[0].name,title:e.name,uri:e.uri,albumUrl:t}})))})),function(){return e=!0}}}),[s,t]),Object(u.jsxs)("div",{className:x.a.Nav,children:[Object(u.jsxs)("div",{className:x.a.NavArrow,children:[Object(u.jsx)("div",{children:Object(u.jsx)("i",{className:"fas fa-chevron-left"})}),Object(u.jsx)("div",{children:Object(u.jsx)("i",{className:"fas fa-chevron-right"})})]}),Object(u.jsxs)("div",{className:x.a.search,children:[Object(u.jsxs)("form",{className:x.a.NavSearch,children:[Object(u.jsx)("span",{children:Object(u.jsx)("i",{className:"fas fa-search"})}),Object(u.jsx)("input",{type:"text",placeholder:"search songs",value:s,onChange:function(e){return i(e.target.value)}})]}),Object(u.jsx)("div",{className:l.length>0&&x.a.result,children:l.map((function(e){return Object(u.jsx)(k,{track:e,chooseTrack:_},e.uri)})).slice(0,5)})]})]})},C=a(14),P=a.n(C);var M=function(e){var t=e.data,a=Object(N.c)((function(e){return e.data.loadiingState})),c=Object(N.c)((function(e){return e.data.apiData})),n=Object(N.b)();return Object(u.jsx)("div",{className:P.a.TopSongItem,onClick:function(){var e=c.tracks.items.find((function(e){return e.track.name===t.track.name}));e&&n(D.currentMusic(e.track))},children:!a&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:P.a.TopSongImg,children:Object(u.jsx)("img",{src:t.track.album.images[0].url,alt:""})}),Object(u.jsxs)("div",{className:P.a.TopSongTitle,children:[Object(u.jsx)("h3",{children:t.track.name}),Object(u.jsx)("span",{children:t.track.artists[0].name})]}),Object(u.jsx)("div",{className:P.a.TopSongPlay,children:Object(u.jsx)("span",{children:Object(u.jsx)("i",{className:"fas fa-play"})})})]})})},E=a(20),F=a.n(E);var B=function(e){for(var t=e.data,a=Object(N.c)((function(e){return e.data.loadingState})),c=[],n=0;n<5&&t;n++)c.push(Object(u.jsx)(M,{data:t[n]},n));return Object(u.jsxs)("div",{className:F.a.songrow,children:[a?Object(u.jsx)("div",{}):Object(u.jsx)("h1",{className:F.a.topic,children:null===t||void 0===t?void 0:t.topic}),Object(u.jsx)("div",{className:F.a.songItem,children:c})]})},G=a(21),H=a.n(G),U=a(60);var Y=function(e){var t=e.accessToken,a=Object(N.c)((function(e){return e.data.loadingState})),n=Object(N.c)((function(e){return e.audio.audioData})),s=Object(c.useState)(!1),i=Object(p.a)(s,2),r=i[0],o=i[1];return Object(c.useEffect)((function(){return o(!0)}),[n.uri]),Object(u.jsx)(u.Fragment,{children:!a&&Object(u.jsx)("div",{className:H.a.audio,children:Object(u.jsx)("div",{className:H.a.player,children:Object(u.jsx)("div",{className:H.a.btns,children:Object(u.jsx)(U.a,{token:t,showSaveIcon:!0,play:r,callback:function(e){e.isPlaying||o(!1)},uris:n.uri?[n.uri]:[],styles:{bgColor:"#181818",color:"#fff",activeColor:"#fff"}})})})})})};var J=function(e){var t=e.accessToken,a=Object(c.useState)(""),n=Object(p.a)(a,2),s=n[0],i=n[1],r=Object(N.c)((function(e){return e.data})),o=Object.values(0!==r.apiData.length&&r.apiData.tracks.items).slice(0,5),l=Object.values(0!==r.apiData.length&&r.apiData.tracks.items).slice(5,10),d=Object(_.a)(Object(_.a)({},o),{},{topic:"Top Songs"});return Object(c.useEffect)((function(){var e=(new Date).getHours();return i(e<12?Object(u.jsx)("div",{className:g.a.greetings,children:"Good Morning"}):e>=12&&e<17?Object(u.jsx)("div",{className:g.a.greetings,children:"Good Afternoon"}):Object(u.jsx)("div",{className:g.a.greetings,children:"Good Evening"}))}),[]),Object(u.jsxs)("div",{className:g.a.home,children:[Object(u.jsx)(R,{accessToken:t}),Object(u.jsx)("div",{className:g.a.greetings,children:s}),0!==r.apiData.length&&Object(u.jsx)(B,{data:d}),0!==r.apiData.length&&Object(u.jsx)(B,{data:l}),Object(u.jsx)(Y,{accessToken:t})]})},W=a(31),q=a.n(W),V=a(58),z=a.n(V);var K=function(e){var t=e.option,a=e.icon;return Object(u.jsxs)("div",{className:z.a.sidebarOption,children:[a&&Object(u.jsx)("i",{className:"".concat(a),style:{paddingLeft:"10px",paddingRight:"10px"}}),a?Object(u.jsx)("h4",{children:t}):Object(u.jsx)("p",{children:t})]})};var Q=function(){return Object(u.jsxs)("div",{className:q.a.sidebar,children:[Object(u.jsx)("img",{className:q.a.logo,src:"https://getheavy.com/wp-content/uploads/2019/12/spotify2019-830x350.jpg",alt:""}),Object(u.jsx)(K,{option:"Home",icon:"fas fa-home"}),Object(u.jsx)(K,{option:"Search",icon:"fas fa-search"}),Object(u.jsx)(K,{option:"Your Library",icon:"fas fa-search"}),Object(u.jsx)("br",{})]})};var Z=function(){return Object(u.jsx)("div",{})},X=a(32),$=a.n(X);var ee=Object(w.b)({name:"data",initialState:{apiData:[],loadingState:!0},reducers:{storeData:function(e,t){e.apiData=t.payload},setLoading:function(e,t){e.loadingState=t.payload}}}),te=ee.actions,ae=ee,ce=(a(59),new S.a({clientId:"cea15f2d1f164548b6042a367be00301"}));var ne=function(e){var t=function(e){var t=Object(c.useState)(),a=Object(p.a)(t,2),n=a[0],s=a[1],i=Object(c.useState)(),r=Object(p.a)(i,2),o=r[0],u=r[1],l=Object(c.useState)(),d=Object(p.a)(l,2),j=d[0],b=d[1];return Object(c.useEffect)((function(){$.a.post("http://localhost:3001/api/login",{code:e}).then((function(e){s(e.data.accessToken),u(e.data.refreshToken),b(e.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(){}))}),[e]),Object(c.useEffect)((function(){if(o&&j){var e=setInterval((function(){$.a.post("http://localhost:3001/api/refresh",{refreshToken:o}).then((function(e){s(e.data.accessToken),b(e.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(){}))}),1e3*(j-60));return function(){return clearInterval(e)}}}),[o,j]),n}(e.code),a=Object(N.b)(),n=Object(c.useState)(!1),s=Object(p.a)(n,2),i=(s[0],s[1]);return Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a(te.setLoading(!0)),t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,ce.setAccessToken(t);case 5:return e.next=7,ce.getPlaylist("37i9dQZF1DX4SBhb3fqCJd").then((function(e){var t=e.body;t&&a(te.storeData(t)),t&&a(D.currentMusic(t.tracks.items[0].track)),t&&a(te.setLoading(!1))}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a]),Object(c.useEffect)((function(){setTimeout((function(){i(!0)}),3e3)}),[]),Object(u.jsxs)("div",{className:h.a.player,children:[Object(u.jsxs)("div",{className:h.a.player__body,children:[Object(u.jsx)(Q,{className:h.a.sidebar}),Object(u.jsx)(J,{accessToken:t})]}),Object(u.jsx)(Z,{})]})},se=new URLSearchParams(window.location.search).get("code");var ie=function(){return Object(u.jsx)("div",{children:se?Object(u.jsx)(ne,{code:se}):Object(u.jsx)(l,{})})},re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,128)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,s=t.getLCP,i=t.getTTFB;a(e),c(e),n(e),s(e),i(e)}))},oe=a(28),ue=Object(w.a)({reducer:{data:ae.reducer,audio:A.reducer}});i.a.render(Object(u.jsx)(oe.a,{children:Object(u.jsx)(N.a,{store:ue,children:Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(ie,{})})})}),document.getElementById("root")),re()},14:function(e,t,a){e.exports={TopSongItem:"TopSongsItem_TopSongItem__tCQoK",TopSongImg:"TopSongsItem_TopSongImg__l64We",TopSongTitle:"TopSongsItem_TopSongTitle__2m6Ux",TopSongPlay:"TopSongsItem_TopSongPlay__1ujcW",example:"TopSongsItem_example__2izC0"}},18:function(e,t,a){e.exports={player:"Dashboard_player__YG0aq",player__body:"Dashboard_player__body__3Lux9",sidebar:"Dashboard_sidebar__1a9HA"}},19:function(e,t,a){e.exports={trackSearch:"TrackSearchResult_trackSearch__8kifV",title:"TrackSearchResult_title__28iJj",artist:"TrackSearchResult_artist__2dBRj"}},20:function(e,t,a){e.exports={songrow:"TopSongsRow_songrow__2u_FG",TopSongRow:"TopSongsRow_TopSongRow__1xhx7",songItem:"TopSongsRow_songItem__3MeVR",topic:"TopSongsRow_topic__1FOrv"}},21:function(e,t,a){e.exports={audio:"Audio_audio__1UGYR",player:"Audio_player__2AktW",pic:"Audio_pic__RoE1e",Img:"Audio_Img__xTBg2",info:"Audio_info__1Ks4i",name:"Audio_name__3bUy1",artist:"Audio_artist__dHbYO",btns:"Audio_btns__gC_Ch","play-pause":"Audio_play-pause__3AA_I",seekSlider:"Audio_seekSlider__3VjmM"}},31:function(e,t,a){e.exports={sidebar:"Sidebar_sidebar__sv30-",logo:"Sidebar_logo__2ZLxD"}},48:function(e,t,a){e.exports={login:"Login_login__3L6Od"}},58:function(e,t,a){e.exports={sidebarOption:"SidebarOption_sidebarOption__3sA6I",sidebarIcon:"SidebarOption_sidebarIcon__PONho"}},59:function(e,t,a){e.exports={"lds-ring":"Loader_lds-ring__2uouw"}},66:function(e,t,a){},86:function(e,t){}},[[127,1,2]]]);
//# sourceMappingURL=main.549a4939.chunk.js.map